// Generated by CoffeeScript 1.9.2
var EPVBackgroundColor,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

EPVBackgroundColor = (function(superClass) {
  extend(EPVBackgroundColor, superClass);

  function EPVBackgroundColor() {
    return EPVBackgroundColor.__super__.constructor.apply(this, arguments);
  }

  EPVBackgroundColor.BASE_COLOR = 'b_color';

  EPVBackgroundColor.CHANGE_COLOR = 'c_color';

  EPVBackgroundColor.initConfigValue = function(eventConfig) {
    var bgColor;
    EPVBackgroundColor.__super__.constructor.initConfigValue.call(this, eventConfig);
    bgColor = $('#main-wrapper.stage_container').css('backgroundColor');
    $(".baseColor", $("values_div", eventConfig.emt)).css('backgroundColor', bgColor);
    return $(".colorPicker", eventConfig.emt).each(function() {
      var self;
      self = $(this);
      if (!self.hasClass('temp') && !self.hasClass('baseColor')) {
        return initColorPicker(self, bgColor, null);
      }
    });
  };

  EPVBackgroundColor.writeToPageValue = function(eventConfig) {
    var emt, errorMes, value, writeValue;
    errorMes = "";
    writeValue = EPVBackgroundColor.__super__.constructor.writeToPageValue.call(this, eventConfig);
    emt = eventConfig.emt;
    value = {};
    value[this.BASE_COLOR] = $('.base_color:first', emt).css('backgroundColor');
    value[this.CHANGE_COLOR] = $('.change_color:first', emt).css('backgroundColor');
    if (value[this.BASE_COLOR] === value[this.CHANGE_COLOR]) {
      errorMes = "同じ色は選択できません";
    }
    if (errorMes.length === 0) {
      writeValue[this.PageValueKey.VALUE] = value;
      PageValue.setEventPageValue(this.PageValueKey.te(eventConfig.teNum), writeValue);
      PageValue.setEventPageValue(Constant.PageValueKey.E_COUNT, eventConfig.teNum);
    }
    return errorMes;
  };

  EPVBackgroundColor.readFromPageValue = function(eventConfig) {
    var emt, ret, value, writeValue;
    ret = EPVBackgroundColor.__super__.constructor.readFromPageValue.call(this, eventConfig);
    if (!ret) {
      return false;
    }
    emt = eventConfig.emt;
    writeValue = PageValue.getEventPageValue(this.PageValueKey.te(eventConfig.teNum));
    value = writeValue[this.PageValueKey.VALUE];
    initColorPicker($(".colorPicker.base_color", emt), value[this.BASE_COLOR], null);
    initColorPicker($(".colorPicker.change_color", emt), value[this.CHANGE_COLOR], null);
    return true;
  };

  return EPVBackgroundColor;

})(EventPageValueBase);

//# sourceMappingURL=backgroundcolor.js.map
