// Generated by CoffeeScript 1.9.2
var EPVItem,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

EPVItem = (function(superClass) {
  extend(EPVItem, superClass);

  function EPVItem() {
    return EPVItem.__super__.constructor.apply(this, arguments);
  }

  EPVItem.minObj = 'item_minobj';

  EPVItem.itemSize = 'item_size';

  EPVItem.initConfigValue = function(eventConfig, item) {
    return EPVItem.__super__.constructor.initConfigValue.call(this, eventConfig);
  };

  EPVItem.writeDefaultToPageValue = function(item) {
    var actionType, end, errorMes, itemWriteValue, start, teNum, value, writeValue;
    errorMes = "";
    writeValue = {};
    writeValue[this.PageValueKey.ID] = item.id;
    writeValue[this.PageValueKey.ITEM_ID] = item.constructor.ITEM_ID;
    writeValue[this.PageValueKey.COMMON_EVENT_ID] = null;
    writeValue[this.PageValueKey.CHAPTER] = 1;
    writeValue[this.PageValueKey.CHAPTER] = 1;
    writeValue[this.PageValueKey.IS_COMMON_EVENT] = false;
    writeValue[this.PageValueKey.METHODNAME] = item.constructor.defaultMethodName();
    actionType = item.constructor.defaultActionType();
    writeValue[this.PageValueKey.ACTIONTYPE] = actionType;
    writeValue[this.PageValueKey.ANIAMTIONTYPE] = item.constructor.defaultAnimationType();
    start = this.getAllScrollLength();
    end = start + item.coodRegist.length;
    if (start > end) {
      start = null;
      end = null;
    }
    writeValue[this.PageValueKey.SCROLL_POINT_START] = start;
    writeValue[this.PageValueKey.SCROLL_POINT_END] = end;
    writeValue[this.PageValueKey.IS_PARALLEL] = false;
    itemWriteValue = item.objWriteEvent();
    $.extend(writeValue, itemWriteValue);
    if (errorMes.length === 0) {
      value = item.constructor.defaultEventConfigValue();
      writeValue[this.PageValueKey.VALUE] = value;
      teNum = PageValue.getEventPageValue(PageValue.Key.E_COUNT);
      if (teNum != null) {
        teNum = parseInt(teNum) + 1;
      } else {
        teNum = 1;
      }
      PageValue.setEventPageValue(this.PageValueKey.te(teNum), writeValue);
      PageValue.setEventPageValue(PageValue.Key.E_COUNT, teNum);
      Timeline.changeTimelineColor(teNum, actionType);
    }
    return errorMes;
  };

  EPVItem.writeToPageValue = function(eventConfig) {
    var errorMes, item, itemWriteValue, value, writeValue;
    errorMes = "";
    writeValue = EPVItem.__super__.constructor.writeToPageValue.call(this, eventConfig);
    item = createdObject[eventConfig.id];
    itemWriteValue = item.objWriteEvent();
    $.extend(writeValue, itemWriteValue);
    if (errorMes.length === 0) {
      value = item.eventConfigValue();
      writeValue[this.PageValueKey.VALUE] = value;
      PageValue.setEventPageValue(this.PageValueKey.te(eventConfig.teNum), writeValue);
      if (parseInt(PageValue.getEventPageValue(PageValue.Key.E_COUNT)) < eventConfig.teNum) {
        PageValue.setEventPageValue(PageValue.Key.E_COUNT, eventConfig.teNum);
      }
    }
    return errorMes;
  };

  EPVItem.writeItemValueToPageValue = function(item) {
    var idx, key, results, te, tes;
    tes = PageValue.getEventPageValue(PageValue.Key.E_PREFIX);
    results = [];
    for (idx in tes) {
      te = tes[idx];
      if (idx.indexOf(PageValue.Key.E_NUM_PREFIX) >= 0 && te.id === item.id) {
        key = "" + PageValue.Key.E_PREFIX + PageValue.Key.PAGE_VALUES_SEPERATOR + idx + PageValue.Key.PAGE_VALUES_SEPERATOR + this.minObj;
        results.push(PageValue.setEventPageValue(key, item.getMinimumObject()));
      } else {
        results.push(void 0);
      }
    }
    return results;
  };

  EPVItem.readFromPageValue = function(eventConfig, item) {
    var ret;
    ret = EPVItem.__super__.constructor.readFromPageValue.call(this, eventConfig);
    return ret;
  };

  return EPVItem;

})(EventPageValueBase);

//# sourceMappingURL=item.js.map
