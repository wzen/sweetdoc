// Generated by CoffeeScript 1.9.2
var StateConfig;

StateConfig = (function() {
  var constant;

  function StateConfig() {}

  constant = gon["const"];

  StateConfig.ROOT_ID_NAME = constant.StateConfig.ROOT_ID_NAME;

  StateConfig.initConfig = function() {
    (function(_this) {
      return (function() {
        var be, emt;
        emt = $("#" + _this.ROOT_ID_NAME + " .configBox.background");
        be = new BackgroundEvent();
        return ColorPickerUtil.initColorPicker(emt.find('.colorPicker:first'), be.backgroundColor, function(a, b, d, e) {
          be = new BackgroundEvent();
          return be.backgroundColor = "#" + b;
        });
      });
    })(this)();
    return (function(_this) {
      return function() {
        var _updateConfigInput, center, emt, se;
        emt = $("#" + _this.ROOT_ID_NAME + " .configBox.screen_event");
        se = new ScreenEvent();
        center = WorktableCommon.calcScrollCenterPosition(se.initConfigY, se.initConfigX);
        $('.initConfigX:first', emt).val(center.left);
        $('.initConfigY:first', emt).val(center.top);
        $('.initConfigScale:first', emt).val(se.initConfigScale);
        $('input', emt).off('change').on('change', function(e) {
          se = new ScreenEvent();
          se[$(e.target).attr('class')] = $(e.target).val();
          return se.setItemAllPropToPageValue();
        });
        _updateConfigInput = function(emt, pointingSize) {
          var screenSize, x, y, z;
          x = pointingSize.x + pointingSize.w * 0.5;
          y = pointingSize.y + pointingSize.h * 0.5;
          z = null;
          screenSize = Common.getScreenSize();
          if (pointingSize.w > pointingSize.h) {
            z = screenSize.width / pointingSize.w;
          } else {
            z = screenSize.height / pointingSize.h;
          }
          center = WorktableCommon.calcScrollCenterPosition(y, x);
          emt.find('.initConfigX:first').val(center.left);
          emt.find('.initConfigY:first').val(center.top);
          emt.find('.initConfigScale:first').val(z);
          se = new ScreenEvent();
          se.initConfigX = x;
          se.initConfigY = y;
          se.initConfigScale = z;
          return se.setItemAllPropToPageValue();
        };
        return emt.find('.event_pointing:first').eventDragPointingRect({
          applyDrawCallback: function(pointingSize) {
            if (window.debug) {
              console.log('applyDrawCallback');
              console.log(pointingSize);
            }
            return _updateConfigInput.call(_this, emt, pointingSize);
          }
        });
      };
    })(this)();
  };

  return StateConfig;

})();

//# sourceMappingURL=state_config.js.map
