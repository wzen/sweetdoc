// Generated by CoffeeScript 1.9.2
var ArrowPagingGuide;

ArrowPagingGuide = (function() {
  ArrowPagingGuide.PAGE_CHANGE_SCROLL_DIST = 50;

  function ArrowPagingGuide() {
    if ($('#main').hasClass('fullscreen')) {
      this.iconWidth = 30;
    } else {
      this.iconWidth = 50;
    }
    this.perWidth = this.iconWidth / this.constructor.PAGE_CHANGE_SCROLL_DIST;
    this.finishedScrollDistSum = 0;
    this.stopTimer = null;
    this.intervalTimer = null;
    this.wrapper = $('#pages .paging_wrapper:first');
    this.emt = $('#pages .paging_parent:first');
  }

  ArrowPagingGuide.prototype.scrollEvent = function(x, y) {
    this.wrapper.show();
    if (this.intervalTimer !== null) {
      clearInterval(this.intervalTimer);
      this.intervalTimer = null;
    }
    if (this.stopTimer !== null) {
      clearTimeout(this.stopTimer);
      this.stopTimer = null;
    }
    this.stopTimer = setTimeout((function(_this) {
      return function() {
        clearTimeout(_this.stopTimer);
        _this.stopTimer = null;
        return _this.intervalTimer = setInterval(function() {
          _this.finishedScrollDistSum -= 3;
          _this.emt.css('width', _this.finishedScrollDistSum * _this.perWidth + 'px');
          if (_this.finishedScrollDistSum <= 0) {
            _this.finishedScrollDistSum = 0;
            clearInterval(_this.intervalTimer);
            _this.intervalTimer = null;
            return _this.wrapper.hide();
          }
        }, 10);
      };
    })(this), 200);
    this.finishedScrollDistSum += x + y;
    this.emt.css('width', this.finishedScrollDistSum * this.perWidth + 'px');
    if (this.finishedScrollDistSum > this.constructor.PAGE_CHANGE_SCROLL_DIST) {
      if (this.intervalTimer !== null) {
        clearInterval(this.intervalTimer);
        this.intervalTimer = null;
      }
      if (this.stopTimer !== null) {
        clearTimeout(this.stopTimer);
        this.stopTimer = null;
      }
      return window.eventAction.nextPageIfFinishedAllChapter((function(_this) {
        return function() {
          return _this.wrapper.hide();
        };
      })(this));
    }
  };

  return ArrowPagingGuide;

})();

//# sourceMappingURL=arrow_paging_guide.js.map
