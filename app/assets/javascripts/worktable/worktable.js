// Generated by CoffeeScript 1.9.2
$(function() {
  return $('.worktable.index').ready(function() {
    var _callback, existedCache;
    window.isWorkTable = true;
    window.initDone = false;
    if (!Common.checkBlowserEnvironment()) {
      alert('ブラウザ非対応です。');
      return;
    }
    existedCache = !LocalStorage.isOverWorktableSaveTimeLimit();
    if (existedCache) {
      LocalStorage.loadAllPageValues();
    }
    CommonVar.initVarWhenLoadedView();
    CommonVar.initCommonVar();
    Common.createdMainContainerIfNeeded(PageValue.getPageNum());
    WorktableCommon.initMainContainer();
    Common.initResize(WorktableCommon.resizeEvent);
    _callback = function() {
      OperationHistory.add(true);
      PageValue.updatePageCount();
      PageValue.updateForkCount();
      return Paging.initPaging();
    };
    if (existedCache) {
      PageValue.adjustInstanceAndEventOnPage();
      WorktableCommon.drawAllItemFromInstancePageValue(function() {
        _callback.call(this);
        return window.initDone = true;
      });
      return Timeline.refreshAllTimeline();
    } else {
      LocalStorage.clearWorktable();
      Timeline.refreshAllTimeline();
      _callback.call(this);
      return Common.showModalView(Constant.ModalViewType.INIT_PROJECT, Project.initProjectModal, false);
    }
  });
});

//# sourceMappingURL=worktable.js.map
