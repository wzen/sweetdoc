// Generated by CoffeeScript 1.9.2
var Chapter;

Chapter = (function() {
  function Chapter(eventListenerList) {
    this.eventListenerList = eventListenerList;
    this.sinkFrontAllActor();
  }

  Chapter.prototype.scrollEvent = function(x, y) {
    return this.eventListenerList.forEach(function(eventListener) {
      if (eventListener.scrollEvent != null) {
        return eventListener.scrollEvent(x, y);
      }
    });
  };

  Chapter.prototype.clickEvent = function(e) {
    return this.eventListenerList.forEach(function(eventListener) {
      if (eventListener.clickEvent != null) {
        return eventListener.clickEvent(e);
      }
    });
  };

  Chapter.prototype.willChapter = function() {
    this.eventListenerList.forEach(function(eventListener) {
      var methodName;
      methodName = eventListener.timelineEvent[TimelineEvent.PageValueKey.METHODNAME];
      return eventListener.willChapter(methodName);
    });
    return this.focusToActorIfNeed();
  };

  Chapter.prototype.didChapter = function() {};

  Chapter.prototype.focusToActorIfNeed = function(type) {
    var height, item, left, top, width;
    if (type == null) {
      type = "center";
    }
    if (this.eventListenerList.length === 1) {
      item = this.eventListenerList[0];
      width = item.itemSize.w;
      height = item.itemSize.h;
      if (item.scale != null) {
        width *= item.scale.w;
        height *= item.scale.h;
      }
      if (type === "center") {
        left = item.itemSize.x + width * 0.5 - (scrollContents.width() * 0.5);
        top = item.itemSize.y + height * 0.5 - (scrollContents.height() * 0.5);
        return scrollContents.animate({
          scrollTop: top,
          scrollLeft: left
        }, 500);
      }
    }
  };

  Chapter.prototype.riseFrontAllActor = function() {
    scrollHandleWrapper.css('z-index', scrollViewSwitchZindex.off);
    scrollContents.css('z-index', scrollViewSwitchZindex.on);
    return this.eventListenerList.forEach(function(eventListener) {
      return eventListener.getJQueryElement().css('z-index', scrollInsideCoverZindex + 1);
    });
  };

  Chapter.prototype.sinkFrontAllActor = function() {
    scrollHandleWrapper.css('z-index', scrollViewSwitchZindex.on);
    scrollContents.css('z-index', scrollViewSwitchZindex.off);
    return this.eventListenerList.forEach(function(eventListener) {
      return eventListener.getJQueryElement().css('z-index', 0);
    });
  };

  return Chapter;

})();

//# sourceMappingURL=chapter.js.map
