// Generated by CoffeeScript 1.9.2
var EventAction;

EventAction = (function() {
  function EventAction(pageList) {
    this.pageList = pageList;
    this.pageIndex = 0;
    this.finishedAllChapters = false;
  }

  EventAction.prototype.thisPage = function() {
    return this.pageList[this.pageIndex];
  };

  EventAction.prototype.start = function() {
    Navbar.setPageNum(this.pageIndex + 1);
    return this.thisPage().willPage();
  };

  EventAction.prototype.nextPageIfFinishedAllChapter = function() {
    if (this.thisPage().finishedAllChapters()) {
      return this.nextPage();
    }
  };

  EventAction.prototype.nextPage = function() {
    this.thisPage().didPage();
    this.pageIndex += 1;
    if (this.pageList.length <= this.pageIndex) {
      return this.finishedAllChapters();
    } else {
      Navbar.setPageNum(this.pageIndex + 1);
      return this.thisPage().willPage();
    }
  };

  EventAction.prototype.rewindPage = function() {
    this.resetPage(this.pageIndex);
    if (!this.thisChapter().doMovePage && this.pageIndex > 0) {
      this.pageIndex -= 1;
      this.resetPage(this.pageIndex);
    }
    return this.thisPage().willPage();
  };

  EventAction.prototype.resetPage = function(pageIndex) {
    return this.pageList[pageIndex].reset();
  };

  EventAction.prototype.rewindAllPages = function() {
    var i, j, page, ref;
    for (i = j = ref = this.pageList.length - 1; j >= 0; i = j += -1) {
      page = this.pageList[i];
      page.reset();
    }
    this.pageIndex = 0;
    this.finishedAllChapters = false;
    return this.start();
  };

  EventAction.prototype.finishAllChapters = function() {
    this.finishedAllChapters = true;
    return console.log('Finish All Chapters!');
  };

  return EventAction;

})();

//# sourceMappingURL=event_action.js.map
