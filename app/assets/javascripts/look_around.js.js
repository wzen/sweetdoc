// Generated by CoffeeScript 1.8.0
var initCommonVar, initResize, initScroll, initScrollEvents, initScrollPoint, item, resizeTimer, scrollEvent, scrollEvents, scrollTimer;

resizeTimer = false;

scrollTimer = -1;

scrollEvents = [];

item = null;

initCommonVar = function() {
  window.wrap = $('#main-wrapper');
  window.contents = $("#scroll_wrapper");
  window.scrollContents = $("#scroll_contents");
  window.inside = $("#scroll_inside");
  window.distX = 0;
  window.distY = 0;
  return window.scrollViewMag = 20;
};

initScrollEvents = function() {};

initResize = function(wrap, contents) {
  resizeTimer = false;
  return $(window).resize(function() {
    if (resizeTimer !== false) {
      clearTimeout(resizeTimer);
    }
    return resizeTimer = setTimeout(function() {
      var h;
      h = $(window).height();
      wrap.height(h);
      return contents.height(h);
    }, 200);
  });
};

initScrollPoint = function() {
  scrollContents.scrollLeft(scrollContents.width() * (scrollViewMag * 0.5));
  return scrollContents.scrollTop(scrollContents.height() * (scrollViewMag * 0.5));
};

initScroll = function() {
  var lastLeft, lastTop, scrollFinished, stopTimer;
  lastLeft = null;
  lastTop = null;
  stopTimer = null;
  scrollContents.scroll(function() {
    var distX, distY, x, y;
    x = $(this).scrollLeft();
    y = $(this).scrollTop();
    if (lastLeft === null || lastTop === null) {
      initScrollPoint();
      lastLeft = x;
      lastTop = y;
    }
    if (stopTimer !== null) {
      clearTimeout(stopTimer);
    }
    stopTimer = setTimeout(function() {
      lastLeft = null;
      lastTop = null;
      clearTimeout(stopTimer);
      return stopTimer = null;
    }, 50);
    if (lastLeft === null || lastTop === null) {
      return;
    }
    distX = x - lastLeft;
    distY = y - lastTop;
    lastLeft = x;
    lastTop = y;
    return scrollEvent(distX, distY);
  });
  return scrollFinished = function() {};
};

scrollEvent = function(distX, distY) {
  return item.scrollEvent(distX, distY);
};

$(function() {
  var objList;
  initCommonVar();
  inside.width(scrollContents.width() * (scrollViewMag + 1));
  inside.height(scrollContents.height() * (scrollViewMag + 1));
  initScrollPoint();
  $('#canvas_container').attr('width', $('#canvas_wrapper').width());
  $('#canvas_container').attr('height', $('#canvas_wrapper').height());
  window.lstorage = localStorage;
  objList = JSON.parse(lstorage.getItem('lookaround'));
  objList.forEach(function(obj) {
    if (obj.itemType === Constant.ItemType.BUTTON) {
      item = new ButtonItem();
    } else if (obj.itemType === Constant.ItemType.ARROW) {
      item = new ArrowItem();
    }
    return item.setMiniumObject(obj);
  });
  return initScroll();
});

//# sourceMappingURL=look_around.js.js.map
