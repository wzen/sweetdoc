// Generated by CoffeeScript 1.9.2
var FloatView;

FloatView = (function() {
  function FloatView() {}

  FloatView.showTimer = null;

  FloatView.Type = (function() {
    function Type() {}

    Type.PREVIEW = 'preview';

    Type.DISPLAY_POSITION = 'display_position';

    Type.INFO = 'info';

    Type.WARN = 'warn';

    Type.ERROR = 'error';

    Type.APPLY = 'apply';

    Type.POINTING_CLICK = 'pointing_click';

    Type.POINTING_DRAG = 'pointing_drag';

    Type.SCALE = 'scale';

    return Type;

  })();

  FloatView.show = function(message, type, showSeconds) {
    var root, screenWrapper;
    if (showSeconds == null) {
      showSeconds = -1;
    }
    if (!window.initDone) {
      return;
    }
    screenWrapper = $('#screen_wrapper');
    root = $(".float_view." + type + ":first", screenWrapper);
    if (root.length === 0) {
      $(".float_view", screenWrapper).remove();
      $('.float_view_temp', screenWrapper).clone(true).attr('class', 'float_view').appendTo(screenWrapper);
      root = $('.float_view:first', screenWrapper);
      root.removeClass(function(index, className) {
        return className !== 'float_view';
      }).addClass(type);
      $('.message', root).removeClass(function(index, className) {
        return className !== 'message';
      }).addClass(type);
      root.fadeIn('fast');
    } else {
      root.show();
    }
    $('.message', root).html(message);
    if (showSeconds >= 0) {
      if (this.showTimer != null) {
        clearTimeout(this.showTimer);
        this.showTimer = null;
      }
      return this.showTimer = setTimeout((function(_this) {
        return function() {
          _this.hide();
          clearTimeout(_this.showTimer);
          return _this.showTimer = null;
        };
      })(this), showSeconds * 1000);
    }
  };

  FloatView.hide = function() {
    return $(".float_view:not('.fixed')").fadeOut('fast');
  };

  FloatView.showWithCloseButton = function(message, type, closeFunc) {
    var root, screenWrapper;
    if (closeFunc == null) {
      closeFunc = null;
    }
    if (!window.initDone) {
      return;
    }
    screenWrapper = $('#screen_wrapper');
    root = $(".float_view.fixed." + type + ":first", screenWrapper);
    if (root.length > 0) {
      root.show();
      return;
    }
    $(".float_view", screenWrapper).remove();
    $('.float_view_fixed_temp', screenWrapper).clone(true).attr('class', 'float_view fixed').appendTo(screenWrapper);
    root = $('.float_view.fixed:first', screenWrapper);
    root.find('.close_button').off('click').on('click', (function(_this) {
      return function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (closeFunc != null) {
          closeFunc();
        }
        return FloatView.hideWithCloseButtonView();
      };
    })(this));
    root.removeClass(function(index, className) {
      return className !== 'float_view' && className !== 'fixed';
    }).addClass(type);
    $('.message', root).removeClass(function(index, className) {
      return className !== 'message';
    }).addClass(type);
    root.show();
    return $('.message', root).html(message);
  };

  FloatView.hideWithCloseButtonView = function() {
    $(".float_view.fixed").fadeOut('fast');
    return this.hidePointingController();
  };

  FloatView.showPointingController = function(pointintObj) {
    var root, screenWrapper;
    if (!window.initDone) {
      return;
    }
    root = $(".float_view.fixed:visible", screenWrapper);
    if (root.length === 0) {
      return;
    }
    screenWrapper = $('#screen_wrapper');
    root = $(".float_view.pointing_controller:first", screenWrapper);
    if (root.length > 0) {
      root.show();
      return;
    }
    $('.float_view_pointing_controller_temp', screenWrapper).clone(true).attr('class', 'float_view pointing_controller').appendTo(screenWrapper);
    root = $('.float_view.pointing_controller:first', screenWrapper);
    root.find('.clear_button').off('click').on('click', (function(_this) {
      return function(e) {
        e.preventDefault();
        e.stopPropagation();
        pointintObj.clearDraw();
        return FloatView.hidePointingController();
      };
    })(this));
    root.find('.apply_button').off('click').on('click', (function(_this) {
      return function(e) {
        e.preventDefault();
        e.stopPropagation();
        pointintObj.applyDraw();
        pointintObj.getJQueryElement().remove();
        return FloatView.hideWithCloseButtonView();
      };
    })(this));
    return root.show();
  };

  FloatView.hidePointingController = function() {
    return $(".float_view.pointing_controller").fadeOut('fast');
  };

  FloatView.scrollMessage = function(top, left) {
    if (!window.initDone) {
      return '';
    }
    return "X: " + left + "  Y:" + top;
  };

  FloatView.displayPositionMessage = function() {
    return 'Preview';
  };

  return FloatView;

})();

//# sourceMappingURL=float_view.js.map
