// Generated by CoffeeScript 1.8.0
var checkBlowserEnvironment, generateId, getPageValue, makeClone, setPageValue;

checkBlowserEnvironment = function() {
  var c, e;
  if (!localStorage) {
    return false;
  } else {
    try {
      localStorage.setItem('test', 'test');
      c = localStorage.getItem('test');
      localStorage.removeItem('test');
    } catch (_error) {
      e = _error;
      return false;
    }
  }
  if (!File) {
    return false;
  }
  return true;
};

generateId = function() {
  var BaseString, RandomString, i, n, numb, _i;
  numb = 10;
  RandomString = '';
  BaseString = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
  n = 62;
  for (i = _i = 0; 0 <= numb ? _i <= numb : _i >= numb; i = 0 <= numb ? ++_i : --_i) {
    RandomString += BaseString.charAt(Math.floor(Math.random() * n));
  }
  return RandomString;
};

makeClone = function(obj) {
  var flags, key, newInstance;
  if ((obj == null) || typeof obj !== 'object') {
    return obj;
  }
  if (obj instanceof Date) {
    return new Date(obj.getTime());
  }
  if (obj instanceof RegExp) {
    flags = '';
    if (obj.global != null) {
      flags += 'g';
    }
    if (obj.ignoreCase != null) {
      flags += 'i';
    }
    if (obj.multiline != null) {
      flags += 'm';
    }
    if (obj.sticky != null) {
      flags += 'y';
    }
    return new RegExp(obj.source, flags);
  }
  newInstance = new obj.constructor();
  for (key in obj) {
    newInstance[key] = clone(obj[key]);
  }
  return newInstance;
};

getPageValue = function(key) {
  var keys, root, value;
  value = null;
  root = $('#page_values');
  keys = key.split(Constant.PAGE_VALUES_SEPERATOR);
  keys.forEach(function(k, index) {
    var type;
    type = '';
    if (keys.length - 1 > index) {
      type = 'div';
    } else {
      type = 'input';
    }
    root = $("" + type + "." + k, root);
    if ((root == null) || root.length === 0) {
      value = null;
      return;
    }
    if (keys.length - 1 === index) {
      return value = root.val();
    }
  });
  return value;
};

setPageValue = function(key, value, isCache) {
  var cacheClassName, keys, root;
  if (isCache == null) {
    isCache = false;
  }
  cacheClassName = 'cache';
  root = $('#page_values');
  keys = key.split(Constant.PAGE_VALUES_SEPERATOR);
  return keys.forEach(function(k, index) {
    var parent, type;
    parent = root;
    type = '';
    if (keys.length - 1 > index) {
      type = 'div';
    } else {
      type = 'input';
    }
    root = $("" + type + "." + k, parent);
    if (keys.length - 1 > index) {
      if ((root == null) || root.length === 0) {
        return root = jQuery("<div class=" + k + "></div>").appendTo(parent);
      }
    } else {
      if ((root == null) || root.length === 0) {
        root = jQuery("<input type='hidden' value=" + value + "></div>").appendTo(parent);
        root.addClass(k);
        if (isCache) {
          return root.addClass(cacheClassName);
        }
      } else {
        root.val(value);
        if (isCache) {
          return root.addClass(cacheClassName);
        } else {
          return root.removeClass(cacheClassName);
        }
      }
    }
  });
};

(function() {
  return window.loadedItemTypeList = [];
})();

$(function() {
  window.drawingCanvas = document.getElementById('canvas_container');
  return window.drawingContext = drawingCanvas.getContext('2d');
});

//# sourceMappingURL=common.js.map
